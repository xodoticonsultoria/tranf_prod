{% extends "base.html" %}
{% block title %}Produtos{% endblock %}
{% block content %}

<h2 class="area-title">ÁREA DE PEDIDOS</h2>

{% for cat in categories %}
  <div class="x-cat">
    <div class="x-cat-head" onclick="toggleCat({{ cat.id }})">
      {% if cat.image %}
        <img src="{{ cat.image.url }}" class="x-cat-icon" alt="">
      {% else %}
        <div class="x-cat-icon placeholder"></div>
      {% endif %}

      <div>
        <div class="x-cat-name">{{ cat.name|upper }}</div>
        <div class="x-cat-count">{{ cat.products.count }} PRODUTOS</div>
      </div>
    </div>

    <div id="cat-body-{{ cat.id }}" class="x-cat-body">
      <div class="x-grid">
        {% for p in cat.products.all %}
          {% if p.active %}
          <form method="post" action="{% url 'q_products' %}" class="x-prod">
            {% csrf_token %}
            <input type="hidden" name="product_id" value="{{ p.id }}">

            {% if p.image %}
              <img src="{{ p.image.url }}" class="x-prod-img" alt="">
            {% else %}
              <div class="x-prod-img placeholder"></div>
            {% endif %}

            <div class="x-prod-name">{{ p.name|upper }}</div>

            <div class="x-qty">
              <button type="button" onclick="dec(this)">−</button>
              <input name="qty" value="1">
              <button type="button" onclick="inc(this)">+</button>
            </div>

            <button class="x-add">ADICIONAR</button>
          </form>
          {% endif %}
        {% endfor %}
      </div>
    </div>
  </div>
{% endfor %}

{% endblock %}
